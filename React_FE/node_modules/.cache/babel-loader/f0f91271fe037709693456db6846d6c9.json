{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Documents\\\\GitHub\\\\ISC13--ONJOB\\\\React_FE\\\\src\\\\components\\\\CardTables\\\\InstructorTable.js\";\nimport React, { useState, useEffect, Fragment } from 'react';\nimport PropTypes from \"prop-types\";\nimport instructorService from './../../assets/services/instructorService';\nimport { Button, Modal } from 'react-bootstrap';\nimport { useFormik } from 'formik';\nimport * as Yup from \"yup\"; // import Input from './../controls/input';\n\nimport Input from './../../assets/services/input';\nexport default function InstructorTable({\n  color\n}) {\n  const [instructors, setInstructors] = useState([]);\n  const [instructorId, setInstructorId] = useState(0);\n  /* ************************* */\n\n  const loadData = () => {\n    instructorService.getAll().then(res => {\n      setInstructors(res);\n    });\n  }; //B9 Remove Thay componentDidMount thành useEffect mngu\n\n\n  useEffect(() => {\n    loadData();\n  }, [instructors]); //[] Bắt buộc phải có nếu không nó sẽ load lại nhiều lần\n  //Set instructors vào để khi thay đổi update or delete thì nó sẽ set lại giá trị của instructors để nó gọi function loadData()\n\n  const [modalShow, setModalShow] = useState(false);\n\n  const handleModalClose = () => setModalShow(false); //Hàm xử lý để biết xem là thêm mới hay update\n\n\n  const handleModalShow = (e, dataId) => {\n    if (e) e.preventDefault();\n    setInstructorId(dataId);\n\n    if (dataId > 0) {\n      //edit\n      instructorService.get(dataId).then(res => {\n        formik.setValues(res);\n        setModalShow(true);\n      });\n    } else {\n      //add\n      formik.resetForm();\n      setModalShow(true);\n    }\n  };\n  /* ************************* */\n  // Phần III: Formik và Function Xử lý handleFormSubmit \n\n\n  const formik = useFormik({\n    initialValues: {\n      insCode: \"\",\n      insName: \"\",\n      insGender: \"\",\n      insBirthday: \"\",\n      insEmail: \"\",\n      insPhone: \"\",\n      insImg: \"\",\n      insCertification: \"\",\n      insWorkStatus: \"\",\n      insNote: \"\" //Nếu có thêm nhiều trường khác\n\n    },\n    validationSchema: Yup.object({\n      insCode: Yup.string().required(\"Required\").min(4, \"Must be 4 characters or more\"),\n      insName: Yup.string().required(\"Required\"),\n      insEmail: Yup.string().email()\n    }),\n    onSubmit: values => {\n      // console.log(values);\n      //Tách ra một hàm riêng để xử lý form\n      handleFormSubmit(values);\n    }\n  }); //Function xử lý khi người dùng nhập dữ liệu và thêm dữ liệu thành công \n\n  const handleFormSubmit = data => {\n    if (instructorId === 0) {\n      //add\n      instructorService.add(data).then(res => {\n        loadData();\n        handleModalClose();\n      });\n    } else {\n      //update\n      instructorService.update(instructorId, data).then(res => {\n        loadData();\n        handleModalClose(); // if(res.errorCode===0){\n        // }else{\n        // }\n      });\n    }\n  }; //Delete 1 dòng dữ liệu\n\n\n  const deleteRow = (e, dataId) => {\n    e.preventDefault();\n    instructorService.delete(dataId).then(res => {\n      if (res.errorCode === 0) {\n        loadData();\n        console.log(res);\n      } else {}\n    });\n    console.log(dataId);\n  };\n\n  return /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded \" + (color === \"light\" ? \"bg-white\" : \"bg-blue-900 text-white\")\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rounded-t mb-0 px-4 py-3 border-0\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-wrap items-center\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relative w-full px-4 max-w-full flex-grow flex-1\"\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"font-semibold text-lg \" + (color === \"light\" ? \"text-gray-800\" : \"text-white\")\n  }, \"DANH S\\xC1CH GI\\u1EA2NG VI\\xCAN\", /*#__PURE__*/React.createElement(\"div\", {\n    className: \"block w-full overflow-x-auto\"\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"items-center w-full bg-transparent border-collapse\"\n  }, /*#__PURE__*/React.createElement(\"thead\", null, /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left \" + (color === \"light\" ? \"bg-gray-100 text-gray-600 border-gray-200\" : \"bg-blue-800 text-blue-300 border-blue-700\")\n  }, \"H\\u1ECD T\\xEAn\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left \" + (color === \"light\" ? \"bg-gray-100 text-gray-600 border-gray-200\" : \"bg-blue-800 text-blue-300 border-blue-700\")\n  }, \"M\\xE3 s\\u1ED1\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left \" + (color === \"light\" ? \"bg-gray-100 text-gray-600 border-gray-200\" : \"bg-blue-800 text-blue-300 border-blue-700\")\n  }, \"Ng\\xE0y sinh\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left \" + (color === \"light\" ? \"bg-gray-100 text-gray-600 border-gray-200\" : \"bg-blue-800 text-blue-300 border-blue-700\")\n  }, \"Email\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left \" + (color === \"light\" ? \"bg-gray-100 text-gray-600 border-gray-200\" : \"bg-blue-800 text-blue-300 border-blue-700\")\n  }, \"\\u0110i\\u1EC7n tho\\u1EA1i\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left \" + (color === \"light\" ? \"bg-gray-100 text-gray-600 border-gray-200\" : \"bg-blue-800 text-blue-300 border-blue-700\")\n  }, \"Ch\\u1EE9ng ch\\u1EC9\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left \" + (color === \"light\" ? \"bg-gray-100 text-gray-600 border-gray-200\" : \"bg-blue-800 text-blue-300 border-blue-700\")\n  }, \"T\\xECnh tr\\u1EA1ng\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left \" + (color === \"light\" ? \"bg-gray-100 text-gray-600 border-gray-200\" : \"bg-blue-800 text-blue-300 border-blue-700\")\n  }, \"Gi\\u1EDBi t\\xEDnh\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left \" + (color === \"light\" ? \"bg-gray-100 text-gray-600 border-gray-200\" : \"bg-blue-800 text-blue-300 border-blue-700\")\n  }, \"Ghi ch\\xFA\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left \" + (color === \"light\" ? \"bg-gray-100 text-gray-600 border-gray-200\" : \"bg-blue-800 text-blue-300 border-blue-700\")\n  }))), /*#__PURE__*/React.createElement(\"tbody\", null, instructors.map((instructor, idx) => {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: instructor.insId\n    }, /*#__PURE__*/React.createElement(\"th\", null, idx + 1), /*#__PURE__*/React.createElement(\"td\", null, instructor.insCode), /*#__PURE__*/React.createElement(\"td\", null, instructor.insName), /*#__PURE__*/React.createElement(\"td\", null, instructor.insGender), /*#__PURE__*/React.createElement(\"td\", null, instructor.insBirthday), /*#__PURE__*/React.createElement(\"td\", null, instructor.insEmail), /*#__PURE__*/React.createElement(\"td\", null, instructor.insPhone), /*#__PURE__*/React.createElement(\"td\", null, instructor.insImg), /*#__PURE__*/React.createElement(\"td\", null, instructor.insWorkStatus), /*#__PURE__*/React.createElement(\"td\", null, instructor.insCertification), /*#__PURE__*/React.createElement(\"td\", null, instructor.insNote), /*#__PURE__*/React.createElement(\"td\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/#\",\n      onClick: e => handleModalShow(e, instructor.insId)\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-edit text-primary\"\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/#\",\n      onClick: e => deleteRow(e, instructor.insId)\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-trash-alt text-danger\"\n    }))));\n  })))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-auto\"\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    \"data-toggle\": \"modal\",\n    \"data-target\": \"#editModal\",\n    variant: \"primary\",\n    onClick: () => handleModalShow(null, 0)\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-plus\"\n  }), \"Th\\xEAm\"))))));\n}\nInstructorTable.defaultProps = {\n  color: \"light\"\n};\nInstructorTable.propTypes = {\n  color: PropTypes.oneOf([\"light\", \"dark\"])\n};","map":{"version":3,"sources":["C:/Users/Admin/Documents/GitHub/ISC13--ONJOB/React_FE/src/components/CardTables/InstructorTable.js"],"names":["React","useState","useEffect","Fragment","PropTypes","instructorService","Button","Modal","useFormik","Yup","Input","InstructorTable","color","instructors","setInstructors","instructorId","setInstructorId","loadData","getAll","then","res","modalShow","setModalShow","handleModalClose","handleModalShow","e","dataId","preventDefault","get","formik","setValues","resetForm","initialValues","insCode","insName","insGender","insBirthday","insEmail","insPhone","insImg","insCertification","insWorkStatus","insNote","validationSchema","object","string","required","min","email","onSubmit","values","handleFormSubmit","data","add","update","deleteRow","delete","errorCode","console","log","map","instructor","idx","insId","defaultProps","propTypes","oneOf"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Fragment } from 'react';\r\nimport PropTypes from \"prop-types\";\r\nimport instructorService from './../../assets/services/instructorService';\r\nimport { Button, Modal } from 'react-bootstrap';\r\n\r\nimport { useFormik } from 'formik';\r\nimport * as Yup from \"yup\";\r\n// import Input from './../controls/input';\r\n\r\nimport Input from './../../assets/services/input';\r\n\r\nexport default function InstructorTable({ color }) {\r\n  const [instructors, setInstructors] = useState([]);\r\n\r\n  const [instructorId, setInstructorId] = useState(0);\r\n\r\n    /* ************************* */\r\n  const loadData = () => {\r\n        instructorService.getAll().then(res => {\r\n            setInstructors(res);\r\n        })\r\n    }\r\n    //B9 Remove Thay componentDidMount thành useEffect mngu\r\n    useEffect(() => {\r\n        \r\n        loadData();\r\n       \r\n    }, [instructors]); //[] Bắt buộc phải có nếu không nó sẽ load lại nhiều lần\r\n    //Set instructors vào để khi thay đổi update or delete thì nó sẽ set lại giá trị của instructors để nó gọi function loadData()\r\n\r\n\r\n    const [modalShow, setModalShow] = useState(false);\r\n\r\n    const handleModalClose = () => setModalShow(false);\r\n\r\n    //Hàm xử lý để biết xem là thêm mới hay update\r\n    const handleModalShow = (e, dataId) => {\r\n        if (e) e.preventDefault();\r\n\r\n        setInstructorId(dataId);\r\n        if (dataId > 0) {//edit\r\n            instructorService.get(dataId).then(res => {\r\n                formik.setValues(res);\r\n                setModalShow(true);\r\n            })\r\n        } else {//add\r\n            formik.resetForm();\r\n            setModalShow(true);\r\n        }\r\n    }\r\n    /* ************************* */\r\n    // Phần III: Formik và Function Xử lý handleFormSubmit \r\n    const formik = useFormik({\r\n        initialValues: {\r\n            insCode: \"\",\r\n            insName: \"\",\r\n            insGender: \"\",\r\n            insBirthday: \"\",\r\n            insEmail: \"\",\r\n            insPhone: \"\",\r\n            insImg: \"\",\r\n            insCertification: \"\",\r\n            insWorkStatus: \"\",\r\n            insNote: \"\"\r\n            //Nếu có thêm nhiều trường khác\r\n        },\r\n        validationSchema: Yup.object({\r\n            insCode: Yup.string().required(\"Required\").min(4, \"Must be 4 characters or more\"),\r\n            insName: Yup.string().required(\"Required\"),\r\n            insEmail: Yup.string().email(),\r\n        }),\r\n        onSubmit: (values) => {\r\n            // console.log(values);\r\n            //Tách ra một hàm riêng để xử lý form\r\n            handleFormSubmit(values);\r\n        }\r\n    });\r\n\r\n    //Function xử lý khi người dùng nhập dữ liệu và thêm dữ liệu thành công \r\n    const handleFormSubmit = (data) => {\r\n\r\n        if (instructorId === 0) {//add\r\n            instructorService.add(data).then((res) => {\r\n                loadData();\r\n                handleModalClose();\r\n            })\r\n        } else {//update\r\n            instructorService.update(instructorId, data).then(res => {\r\n                loadData()\r\n                handleModalClose();\r\n                // if(res.errorCode===0){\r\n\r\n                // }else{\r\n\r\n                // }\r\n            })\r\n        }\r\n    }\r\n\r\n\r\n    //Delete 1 dòng dữ liệu\r\n    const deleteRow = (e, dataId) => {\r\n        e.preventDefault();\r\n        instructorService.delete(dataId).then(res => {\r\n            if (res.errorCode === 0) {\r\n                loadData();\r\n                console.log(res);\r\n\r\n            } else {\r\n\r\n            }\r\n        });\r\n        console.log(dataId);\r\n    }\r\n  \r\n  return (\r\n    <Fragment>\r\n        {/* Colors */}\r\n      <div\r\n        className={\r\n          \"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded \" +\r\n          (color === \"light\" ? \"bg-white\" : \"bg-blue-900 text-white\")\r\n        }\r\n      >\r\n        <div className=\"rounded-t mb-0 px-4 py-3 border-0\">\r\n          <div className=\"flex flex-wrap items-center\">\r\n            <div className=\"relative w-full px-4 max-w-full flex-grow flex-1\">\r\n              <h3\r\n                className={\r\n                  \"font-semibold text-lg \" +\r\n                  (color === \"light\" ? \"text-gray-800\" : \"text-white\")\r\n                }\r\n              >\r\n                DANH SÁCH GIẢNG VIÊN\r\n                {/* Table Title */}\r\n                <div className=\"block w-full overflow-x-auto\">\r\n                  <table className=\"items-center w-full bg-transparent border-collapse\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th\r\n                          className={\r\n                            \"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left \" +\r\n                            (color === \"light\"\r\n                              ? \"bg-gray-100 text-gray-600 border-gray-200\"\r\n                              : \"bg-blue-800 text-blue-300 border-blue-700\")\r\n                          }\r\n                        >\r\n                          Họ Tên\r\n                        </th>\r\n                        <th\r\n                          className={\r\n                            \"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left \" +\r\n                            (color === \"light\"\r\n                              ? \"bg-gray-100 text-gray-600 border-gray-200\"\r\n                              : \"bg-blue-800 text-blue-300 border-blue-700\")\r\n                          }\r\n                        >\r\n                          Mã số\r\n                        </th>\r\n                        \r\n                        <th\r\n                          className={\r\n                            \"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left \" +\r\n                            (color === \"light\"\r\n                              ? \"bg-gray-100 text-gray-600 border-gray-200\"\r\n                              : \"bg-blue-800 text-blue-300 border-blue-700\")\r\n                          }\r\n                        >\r\n                          Ngày sinh\r\n                        </th>\r\n                        \r\n                        <th\r\n                          className={\r\n                            \"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left \" +\r\n                            (color === \"light\"\r\n                              ? \"bg-gray-100 text-gray-600 border-gray-200\"\r\n                              : \"bg-blue-800 text-blue-300 border-blue-700\")\r\n                          }\r\n                        >\r\n                          Email\r\n                        </th>\r\n\r\n                        <th\r\n                          className={\r\n                            \"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left \" +\r\n                            (color === \"light\"\r\n                              ? \"bg-gray-100 text-gray-600 border-gray-200\"\r\n                              : \"bg-blue-800 text-blue-300 border-blue-700\")\r\n                          }\r\n                        >\r\n                          Điện thoại\r\n                        </th>\r\n\r\n                        <th\r\n                          className={\r\n                            \"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left \" +\r\n                            (color === \"light\"\r\n                              ? \"bg-gray-100 text-gray-600 border-gray-200\"\r\n                              : \"bg-blue-800 text-blue-300 border-blue-700\")\r\n                          }\r\n                        >\r\n                          Chứng chỉ\r\n                        </th>\r\n\r\n                        <th\r\n                          className={\r\n                            \"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left \" +\r\n                            (color === \"light\"\r\n                              ? \"bg-gray-100 text-gray-600 border-gray-200\"\r\n                              : \"bg-blue-800 text-blue-300 border-blue-700\")\r\n                          }\r\n                        >\r\n                          Tình trạng\r\n                        </th>\r\n                        <th\r\n                          className={\r\n                            \"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left \" +\r\n                            (color === \"light\"\r\n                              ? \"bg-gray-100 text-gray-600 border-gray-200\"\r\n                              : \"bg-blue-800 text-blue-300 border-blue-700\")\r\n                          }\r\n                        >\r\n                          Giới tính\r\n                        </th>\r\n                        <th\r\n                          className={\r\n                            \"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left \" +\r\n                            (color === \"light\"\r\n                              ? \"bg-gray-100 text-gray-600 border-gray-200\"\r\n                              : \"bg-blue-800 text-blue-300 border-blue-700\")\r\n                          }\r\n                        >\r\n                          Ghi chú\r\n                        </th>                \r\n\r\n                        <th\r\n                          className={\r\n                            \"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left \" +\r\n                            (color === \"light\"\r\n                              ? \"bg-gray-100 text-gray-600 border-gray-200\"\r\n                              : \"bg-blue-800 text-blue-300 border-blue-700\")\r\n                          }\r\n                        ></th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    {\r\n                      instructors.map((instructor, idx) => {\r\n                          return (\r\n                              <tr key={instructor.insId}>\r\n                                  <th>{idx + 1}</th>\r\n                                  <td>{instructor.insCode}</td>\r\n                                  <td>{instructor.insName}</td>\r\n                                  <td>{instructor.insGender}</td>\r\n                                  <td >{instructor.insBirthday}</td>\r\n                                  <td>{instructor.insEmail}</td>\r\n                                  <td>{instructor.insPhone}</td>\r\n                                  <td>{instructor.insImg}</td>\r\n                                  <td>{instructor.insWorkStatus}</td>\r\n                                  <td>{instructor.insCertification}</td>\r\n                                  <td>{instructor.insNote}</td>\r\n                                  <td>\r\n                                      <a href=\"/#\" onClick={(e) => handleModalShow(e, instructor.insId)}><i className=\"fas fa-edit text-primary\"></i></a>\r\n                                      <a href=\"/#\" onClick={(e) => deleteRow(e, instructor.insId)}><i className=\"fas fa-trash-alt text-danger\"></i></a>\r\n                                  </td>\r\n                              </tr>\r\n                          )\r\n                  })}          \r\n                  </tbody>\r\n                </table>\r\n                      \r\n            </div>\r\n              </h3>\r\n            </div>\r\n            \r\n            <div className=\"col-auto\">\r\n                <button \r\n                type=\"button\" \r\n                className=\"btn btn-primary\" \r\n                data-toggle=\"modal\" data-target=\"#editModal\" \r\n                variant=\"primary\" onClick={() => \r\n                handleModalShow(null, 0)}>\r\n                  <i className=\"fas fa-plus\"></i> \r\n                  Thêm\r\n                </button>\r\n                {/* Table */}\r\n\r\n              </div>\r\n          </div>\r\n        </div>\r\n        \r\n        \r\n      </div>\r\n      \r\n    </Fragment>\r\n  );\r\n}\r\n\r\nInstructorTable.defaultProps = {\r\n  color: \"light\",\r\n};\r\n\r\nInstructorTable.propTypes = {\r\n  color: PropTypes.oneOf([\"light\", \"dark\"]),\r\n};\r\n"]},"metadata":{},"sourceType":"module"}