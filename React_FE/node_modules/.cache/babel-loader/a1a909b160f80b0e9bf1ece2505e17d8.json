{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Documents\\\\GitHub\\\\ISC13--ONJOB\\\\React_FE\\\\src\\\\components\\\\CardTables\\\\RoomTable.js\";\nimport React, { useState, useEffect, Fragment } from 'react';\nimport PropTypes from \"prop-types\";\nimport { Button, Modal } from 'react-bootstrap';\nimport { useFormik } from 'formik';\nimport * as Yup from \"yup\"; // import Input from './../controls/input';\n\nimport Input from './../../assets/services/input'; // components\n// import TableDropdown from \"components/Dropdowns/TableDropdown.js\";\n\nimport roomService from './../../assets/services/roomService';\nexport default function RoomTable({\n  color\n}) {\n  // state = { }\n  const [rooms, setRooms] = useState([]);\n  const [roomId, setRoomId] = useState(0);\n\n  const loadData = () => {\n    roomService.getAll().then(res => {\n      setRooms(res);\n    });\n  };\n\n  useEffect(() => {\n    loadData();\n  }, [roomId]);\n  const [modalShow, setModalShow] = useState(false);\n\n  const handleModalClose = () => setModalShow(false); //Hàm xử lý để biết xem là thêm mới hay update\n\n\n  const handleModalShow = (e, dataId) => {\n    if (e) e.preventDefault();\n    setInstructorId(dataId);\n\n    if (dataId > 0) {\n      //edit\n      roomService.get(dataId).then(res => {\n        formik.setValues(res);\n        setModalShow(true);\n      });\n    } else {\n      //add\n      formik.resetForm();\n      setModalShow(true);\n    }\n  };\n  /* ************************* */\n  // Phần III: Formik và Function Xử lý handleFormSubmit \n\n\n  const formik = useFormik({\n    initialValues: {\n      roomCode: \"\",\n      roomName: \"\",\n      roomType: \"\",\n      roomStatus: \"\" //Nếu có thêm nhiều trường khác\n\n    },\n    validationSchema: Yup.object({\n      roomCode: Yup.string().required(\"Required\").min(4, \"Must be 4 characters or more\"),\n      roomName: Yup.string().required(\"Required\")\n    }),\n    onSubmit: values => {\n      // console.log(values);\n      //Tách ra một hàm riêng để xử lý form\n      handleFormSubmit(values);\n    }\n  }); //Function xử lý khi người dùng nhập dữ liệu và thêm dữ liệu thành công \n\n  const handleFormSubmit = data => {\n    if (roomId === 0) {\n      //add\n      roomService.add(data).then(res => {\n        loadData();\n        handleModalClose();\n      });\n    } else {\n      //update\n      roomService.update(roomId, data).then(res => {\n        loadData();\n        handleModalClose(); // if(res.errorCode===0){\n        // }else{\n        // }\n      });\n    }\n  }; //Delete 1 dòng dữ liệu\n\n\n  const deleteRow = (e, dataId) => {\n    e.preventDefault();\n    roomService.delete(dataId).then(res => {\n      if (res.errorCode === 0) {\n        loadData();\n        console.log(res);\n      } else {}\n    });\n    console.log(dataId);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded \" + (color === \"light\" ? \"bg-white\" : \"bg-blue-900 text-white\")\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rounded-t mb-0 px-4 py-3 border-0\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-wrap items-center\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relative w-full px-4 max-w-full flex-grow flex-1\"\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"font-semibold text-lg \" + (color === \"light\" ? \"text-gray-800\" : \"text-white\")\n  }, \"DANH S\\xC1CH PH\\xD2NG H\\u1ECCC\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-auto\"\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    \"data-toggle\": \"modal\",\n    \"data-target\": \"#editModal\"\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-plus\"\n  }), \" Th\\xEAm\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"block w-full overflow-x-auto\"\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"items-center w-full bg-transparent border-collapse\"\n  }, /*#__PURE__*/React.createElement(\"thead\", null, /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-3 w-5 text-center align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold \" + (color === \"light\" ? \"bg-gray-100 text-gray-600 border-gray-200\" : \"bg-blue-800 text-blue-300 border-blue-700\")\n  }, \"STT\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-3 w-5 text-center align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold \" + (color === \"light\" ? \"bg-gray-100 text-gray-600 border-gray-200\" : \"bg-blue-800 text-blue-300 border-blue-700\")\n  }, \"M\\xE3 ph\\xF2ng\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-3 w-5 text-center align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold \" + (color === \"light\" ? \"bg-gray-100 text-gray-600 border-gray-200\" : \"bg-blue-800 text-blue-300 border-blue-700\")\n  }, \"Ph\\xF2ng h\\u1ECDc\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-3 w-5 text-center align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold \" + (color === \"light\" ? \"bg-gray-100 text-gray-600 border-gray-200\" : \"bg-blue-800 text-blue-300 border-blue-700\")\n  }, \"Lo\\u1EA1i ph\\xF2ng\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-3 w-5 text-center align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold \" + (color === \"light\" ? \"bg-gray-100 text-gray-600 border-gray-200\" : \"bg-blue-800 text-blue-300 border-blue-700\")\n  }, \"T\\xECnh tr\\u1EA1ng\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-3 w-5 text-center align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold \" + (color === \"light\" ? \"bg-gray-100 text-gray-600 border-gray-200\" : \"bg-blue-800 text-blue-300 border-blue-700\")\n  }, \"Active\"))), /*#__PURE__*/React.createElement(\"tbody\", null, rooms.map((room, idx) => {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: room.roomId\n    }, /*#__PURE__*/React.createElement(\"th\", null, idx + 1), /*#__PURE__*/React.createElement(\"td\", null, room.roomCode), /*#__PURE__*/React.createElement(\"td\", null, room.roomName), /*#__PURE__*/React.createElement(\"td\", null, room.roomType), /*#__PURE__*/React.createElement(\"td\", null, room.roomStatus), /*#__PURE__*/React.createElement(\"td\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/#\",\n      onClick: e => handleModalShow(e, room.roomId)\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-edit text-primary\"\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/#\",\n      onClick: e => deleteRow(e, room.roomId)\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-trash-alt text-danger\"\n    }))));\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal fade\",\n    id: \"editModal\",\n    tabindex: \"-1\",\n    \"aria-labelledby\": \"exampleModalLabel\",\n    \"aria-hidden\": \"true\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-dialog\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-content\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-header\"\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"modal-title\",\n    id: \"exampleModalLabel\"\n  }, \"Ph\\xF2ng m\\u1EDBi\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"close\",\n    \"data-dismiss\": \"modal\",\n    \"aria-label\": \"Close\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    \"aria-hidden\": \"true\"\n  }, \"\\xD7\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-body\"\n  }, /*#__PURE__*/React.createElement(\"form\", null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row \"\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"txtCode\",\n    className: \"col-sm-3 col-form-label \"\n  }, \"M\\xE3 Ph\\xF2ng\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-9 \"\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    id: \"txtCode\"\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row \"\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"txtName\",\n    className: \"col-sm-3 col-form-label \"\n  }, \"T\\xEAn ph\\xF2ng\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-9 \"\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    id: \"txtName\"\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row \"\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"txtName\",\n    className: \"col-sm-3 col-form-label \"\n  }, \"Lo\\u1EA1i ph\\xF2ng\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-9 \"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-check\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"row py-2\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"col-sm-6\"\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"form-check-input\",\n    type: \"radio\",\n    name: \"Gender\",\n    id: \"rdGender\",\n    value: \"1\"\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    class: \"form-check-label\",\n    for: \"Radios1\"\n  }, \"L\\xFD thuy\\u1EBFt\")), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"col-sm-6\"\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"form-check-input\",\n    type: \"radio\",\n    name: \"Gender\",\n    id: \"rdGender\",\n    value: \"2\"\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    class: \"form-check-label\",\n    for: \"Radios1\"\n  }, \"Th\\u1EF1c h\\xE0nh\")))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-footer\"\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-secondary\",\n    \"data-dismiss\": \"modal\"\n  }, \"Tho\\xE1t\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\"\n  }, \"L\\u01B0u\"))))))));\n}\nRoomTable.defaultProps = {\n  color: \"light\"\n};\nRoomTable.propTypes = {\n  color: PropTypes.oneOf([\"light\", \"dark\"])\n};","map":{"version":3,"sources":["C:/Users/Admin/Documents/GitHub/ISC13--ONJOB/React_FE/src/components/CardTables/RoomTable.js"],"names":["React","useState","useEffect","Fragment","PropTypes","Button","Modal","useFormik","Yup","Input","roomService","RoomTable","color","rooms","setRooms","roomId","setRoomId","loadData","getAll","then","res","modalShow","setModalShow","handleModalClose","handleModalShow","e","dataId","preventDefault","setInstructorId","get","formik","setValues","resetForm","initialValues","roomCode","roomName","roomType","roomStatus","validationSchema","object","string","required","min","onSubmit","values","handleFormSubmit","data","add","update","deleteRow","delete","errorCode","console","log","map","room","idx","defaultProps","propTypes","oneOf"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Fragment } from 'react';\r\nimport PropTypes from \"prop-types\";\r\nimport { Button, Modal } from 'react-bootstrap';\r\n\r\nimport { useFormik } from 'formik';\r\nimport * as Yup from \"yup\";\r\n// import Input from './../controls/input';\r\n\r\nimport Input from './../../assets/services/input';\r\n\r\n// components\r\n\r\n// import TableDropdown from \"components/Dropdowns/TableDropdown.js\";\r\nimport roomService from './../../assets/services/roomService';\r\n\r\n\r\nexport default function RoomTable({ color }) {\r\n  // state = { }\r\n  const[rooms,setRooms] = useState([]);\r\n  const[roomId,setRoomId] = useState(0);\r\n  \r\n  const loadData = ()=>{\r\n    roomService.getAll().then(res=>{\r\n      setRooms(res);\r\n    })\r\n  }\r\n\r\n  useEffect(()=>{\r\n    loadData();\r\n  },[roomId]);\r\n\r\n  const [modalShow, setModalShow] = useState(false);\r\n\r\n    const handleModalClose = () => setModalShow(false);\r\n\r\n    //Hàm xử lý để biết xem là thêm mới hay update\r\n    const handleModalShow = (e, dataId) => {\r\n        if (e) e.preventDefault();\r\n\r\n        setInstructorId(dataId);\r\n        if (dataId > 0) {//edit\r\n            roomService.get(dataId).then(res => {\r\n                formik.setValues(res);\r\n                setModalShow(true);\r\n            })\r\n        } else {//add\r\n            formik.resetForm();\r\n            setModalShow(true);\r\n        }\r\n    }\r\n    /* ************************* */\r\n    // Phần III: Formik và Function Xử lý handleFormSubmit \r\n    const formik = useFormik({\r\n        initialValues: {\r\n            roomCode: \"\",\r\n            roomName: \"\",\r\n            roomType: \"\",\r\n            roomStatus: \"\",\r\n           \r\n            //Nếu có thêm nhiều trường khác\r\n        },\r\n        validationSchema: Yup.object({\r\n          roomCode: Yup.string().required(\"Required\").min(4, \"Must be 4 characters or more\"),\r\n          roomName: Yup.string().required(\"Required\")\r\n           \r\n        }),\r\n        onSubmit: (values) => {\r\n            // console.log(values);\r\n            //Tách ra một hàm riêng để xử lý form\r\n            handleFormSubmit(values);\r\n        }\r\n    });\r\n\r\n    //Function xử lý khi người dùng nhập dữ liệu và thêm dữ liệu thành công \r\n    const handleFormSubmit = (data) => {\r\n\r\n        if (roomId === 0) {//add\r\n            roomService.add(data).then((res) => {\r\n                loadData();\r\n                handleModalClose();\r\n            })\r\n        } else {//update\r\n            roomService.update(roomId, data).then(res => {\r\n                loadData()\r\n                handleModalClose();\r\n                // if(res.errorCode===0){\r\n\r\n                // }else{\r\n\r\n                // }\r\n            })\r\n        }\r\n    }\r\n\r\n\r\n    //Delete 1 dòng dữ liệu\r\n    const deleteRow = (e, dataId) => {\r\n        e.preventDefault();\r\n        roomService.delete(dataId).then(res => {\r\n            if (res.errorCode === 0) {\r\n                loadData();\r\n                console.log(res);\r\n\r\n            } else {\r\n\r\n            }\r\n        });\r\n        console.log(dataId);\r\n    }\r\n\r\n  \r\n  return (\r\n    <>\r\n        {/* Colors */}\r\n      <div\r\n        className={\r\n          \"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded \" +\r\n          (color === \"light\" ? \"bg-white\" : \"bg-blue-900 text-white\")\r\n        }\r\n      >\r\n        <div className=\"rounded-t mb-0 px-4 py-3 border-0\">\r\n          <div className=\"flex flex-wrap items-center\">\r\n            <div className=\"relative w-full px-4 max-w-full flex-grow flex-1\">\r\n              <h3\r\n                className={\r\n                  \"font-semibold text-lg \" +\r\n                  (color === \"light\" ? \"text-gray-800\" : \"text-white\")\r\n                }\r\n              >\r\n                {/* Table Title */}\r\n                DANH SÁCH PHÒNG HỌC\r\n              </h3>\r\n            </div>\r\n            \r\n            <div className=\"col-auto\">\r\n              <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-primary\"\r\n                    data-toggle=\"modal\"\r\n                    data-target=\"#editModal\"\r\n                  >\r\n                <i className=\"fas fa-plus\"></i> Thêm\r\n              </button>\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"block w-full overflow-x-auto\">\r\n          \r\n          <table className=\"items-center w-full bg-transparent border-collapse\">\r\n            <thead>\r\n              <tr>\r\n                <th className={\"px-3 w-5 text-center align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold \" + (color === \"light\"? \"bg-gray-100 text-gray-600 border-gray-200\": \"bg-blue-800 text-blue-300 border-blue-700\")}>\r\n                  STT\r\n                </th>\r\n                <th className={\"px-3 w-5 text-center align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold \" + (color === \"light\"? \"bg-gray-100 text-gray-600 border-gray-200\": \"bg-blue-800 text-blue-300 border-blue-700\")}>\r\n                  Mã phòng\r\n                </th>\r\n\r\n                <th className={\"px-3 w-5 text-center align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold \" + (color === \"light\"? \"bg-gray-100 text-gray-600 border-gray-200\": \"bg-blue-800 text-blue-300 border-blue-700\")}>\r\n                  Phòng học\r\n                </th>\r\n                \r\n                \r\n                <th className={\"px-3 w-5 text-center align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold \" + (color === \"light\"? \"bg-gray-100 text-gray-600 border-gray-200\": \"bg-blue-800 text-blue-300 border-blue-700\")}>\r\n                  Loại phòng\r\n                </th>\r\n                \r\n                <th className={\"px-3 w-5 text-center align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold \" + (color === \"light\"? \"bg-gray-100 text-gray-600 border-gray-200\": \"bg-blue-800 text-blue-300 border-blue-700\")}>\r\n                  Tình trạng\r\n                </th>\r\n\r\n                <th className={\"px-3 w-5 text-center align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold \" + (color === \"light\"? \"bg-gray-100 text-gray-600 border-gray-200\": \"bg-blue-800 text-blue-300 border-blue-700\")}>\r\n                  Active\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {/* Render table */}\r\n              {\r\n                rooms.map((room,idx)=>{\r\n                  return(\r\n                    <tr key={room.roomId}>\r\n                      <th>{idx+1}</th>\r\n                      <td>{room.roomCode}</td>\r\n                      <td>{room.roomName}</td>\r\n                      <td>{room.roomType}</td>\r\n                      <td>{room.roomStatus}</td>\r\n                      <td>\r\n                        <a href=\"/#\" onClick={(e) => handleModalShow(e, room.roomId)}>\r\n                          <i className=\"fas fa-edit text-primary\"></i>\r\n                        </a>\r\n                        <a href=\"/#\" onClick={(e) => deleteRow(e, room.roomId)}>\r\n                          <i className=\"fas fa-trash-alt text-danger\"></i>\r\n                        </a>\r\n                      </td>\r\n                    </tr>\r\n                  )\r\n                })\r\n              }\r\n               \r\n            </tbody>\r\n          </table>\r\n          <div className=\"modal fade\" id=\"editModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n            <div className=\"modal-dialog\">\r\n                <div className=\"modal-content\">\r\n                  <div className=\"modal-header\">\r\n                    <h5 className=\"modal-title\" id=\"exampleModalLabel\">Phòng mới</h5>\r\n                    <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                        <span aria-hidden=\"true\">&times;</span>\r\n                    </button>\r\n                  </div>\r\n                  <div className=\"modal-body\">\r\n                      <form>\r\n                          <div className=\"form-group row \">\r\n                            <label for=\"txtCode\" className=\"col-sm-3 col-form-label \">Mã Phòng</label>\r\n                            <div className=\"col-sm-9 \">\r\n                              <input type=\"text\" className=\"form-control\" id=\"txtCode\"/>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div className=\"form-group row \">\r\n                            <label for=\"txtName\" className=\"col-sm-3 col-form-label \">Tên phòng</label>\r\n                            <div className=\"col-sm-9 \">\r\n                              <input type=\"text\" className=\"form-control\" id=\"txtName\"/>\r\n                            </div>\r\n                          </div>\r\n                          \r\n                          <div className=\"form-group row \">\r\n                            <label for=\"txtName\" className=\"col-sm-3 col-form-label \">Loại phòng</label>\r\n                            <div className=\"col-sm-9 \">\r\n                              <div class=\"form-check\">\r\n                                  <div class=\"row py-2\">\r\n                                    <div class=\"col-sm-6\">\r\n                                        <input class=\"form-check-input\" type=\"radio\" name=\"Gender\" id=\"rdGender\" value=\"1\" />\r\n                                        <label class=\"form-check-label\" for=\"Radios1\">\r\n                                          Lý thuyết\r\n                                        </label>\r\n                                      </div>\r\n                                      <div class=\"col-sm-6\">\r\n                                        <input class=\"form-check-input\" type=\"radio\" name=\"Gender\" id=\"rdGender\" value=\"2\" />\r\n                                        <label class=\"form-check-label\" for=\"Radios1\">\r\n                                          Thực hành\r\n                                        </label>\r\n                                      </div>\r\n                                  </div> \r\n                              </div>\r\n                            </div>\r\n                          </div>      \r\n                          \r\n                          {/* <div className=\"form-group row \">\r\n                            <label for=\"txtName\" className=\"col-sm-3 col-form-label \">Tình trạng</label>\r\n                            <div className=\"col-sm-9 \">\r\n                              <div class=\"form-check\">\r\n                                  <div class=\"row py-2\">\r\n                                    <div class=\"col-sm-6\">\r\n                                        <input class=\"form-check-input\" type=\"radio\" name=\"Status\" id=\"rdStatus\" value=\"1\" />\r\n                                        <label class=\"form-check-label\" for=\"Radios2\">\r\n                                          Còn hoạt động\r\n                                        </label>\r\n                                      </div>\r\n                                      <div class=\"col-sm-6\">\r\n                                        <input class=\"form-check-input\" type=\"radio\" name=\"Status\" id=\"rdStatus\" value=\"2\" />\r\n                                        <label class=\"form-check-label\" for=\"Radios2\">\r\n                                          Ngưng hoạt động\r\n                                        </label>\r\n                                      </div>\r\n                                    </div> \r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                             */}\r\n                      </form>\r\n                  </div>\r\n                  <div className=\"modal-footer\">\r\n                  <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">Thoát</button>\r\n                  <button type=\"button\" className=\"btn btn-primary\">Lưu</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n          </div>\r\n          </div>\r\n\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nRoomTable.defaultProps = {\r\n  color: \"light\",\r\n};\r\n\r\nRoomTable.propTypes = {\r\n  color: PropTypes.oneOf([\"light\", \"dark\"]),\r\n};\r\n"]},"metadata":{},"sourceType":"module"}